<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>حاسبتي الذكية</title>
    
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="theme-color" content="#ff9500">

    <style>
        body { font-family: sans-serif; display: flex; justify-content: center; align-items: center; height: 100vh; margin: 0; background-color: #1a1a1a; color: white; }
        .calculator { background: #000; padding: 25px; border-radius: 30px; box-shadow: 0 20px 50px rgba(0,0,0,0.5); width: 300px; }
        #display { width: 100%; height: 70px; font-size: 35px; text-align: left; margin-bottom: 20px; border: none; background: transparent; color: white; outline: none; }
        .buttons { display: grid; grid-template-columns: repeat(4, 1fr); gap: 12px; }
        button { height: 60px; font-size: 20px; cursor: pointer; border: none; border-radius: 50%; background: #333; color: white; transition: 0.2s; }
        button:active { transform: scale(0.9); background: #555; }
        .operator { background: #ff9500; }
        .equal { background: #4caf50; grid-column: span 2; border-radius: 35px; }
        .clear { background: #a5a5a5; color: black; grid-column: span 2; border-radius: 35px; }
    </style>
</head>
<body>

<div class="calculator">
    <input type="text" id="display" placeholder="0" disabled>
    <div class="buttons">
        <button class="clear" onclick="c()">AC</button>
        <button class="operator" onclick="a('/')">÷</button>
        <button class="operator" onclick="a('*')">×</button>
        
        <button onclick="a('7')">7</button>
        <button onclick="a('8')">8</button>
        <button onclick="a('9')">9</button>
        <button class="operator" onclick="a('-')">-</button>
        
        <button onclick="a('4')">4</button>
        <button onclick="a('5')">5</button>
        <button onclick="a('6')">6</button>
        <button class="operator" onclick="a('+')">+</button>
        
        <button onclick="a('1')">1</button>
        <button onclick="a('2')">2</button>
        <button onclick="a('3')">3</button>
        <button class="equal" onclick="e()">=</button>
        
        <button onclick="a('0')" style="grid-column: span 2; border-radius: 35px;">0</button>
        <button onclick="a('.')">.</button>
    </div>
</div>

<script>
    let d = document.getElementById('display');
    function a(v) { d.value += v; }
    function c() { d.value = ''; }
    function e() { try { d.value = eval(d.value); } catch { d.value = 'خطأ'; } }

    // كود التشغيل بدون إنترنت (Service Worker المدمج)
    if ('serviceWorker' in navigator) {
        const sw = `self.addEventListener('fetch', r => r.respondWith(fetch(r.request).catch(() => caches.match(r.request))));`;
        const b = new Blob([sw], {type: 'text/javascript'});
        navigator.serviceWorker.register(URL.createObjectURL(b));
    }
</script>
</body>
</html>
